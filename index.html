<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Crepe Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#fff1f2',
                            100: '#ffe4e6',
                            200: '#fecdd3',
                            300: '#fda4af',
                            400: '#fb7185',
                            500: '#f43f5e',
                            600: '#e11d48',
                            700: '#be123c',
                            800: '#9f1239',
                            900: '#881337',
                        },
                        crepe: {
                            50: '#fff8fa',
                            100: '#fff1f5',
                            200: '#ffe5ec',
                            300: '#ffd3e0',
                            400: '#ffb1c8',
                            500: '#fd8fac',
                            600: '#f5658f',
                            700: '#e94d7a',
                            800: '#d43d6b',
                            900: '#b52d5a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #fff8fa 0%, #ffe5ec 100%);
        }
        .order-card {
            transition: all 0.3s ease;
        }
        .order-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .floating-btn {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .chart-container {
            height: 300px;
        }
        .slide-in {
            animation: slideIn 0.3s forwards;
        }
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Header with menu -->
    <header class="bg-crepe-500 text-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fas fa-pancakes text-3xl mr-3"></i>
                <h1 class="text-2xl font-bold">Sweet Crepe</h1>
            </div>
            <div class="relative">
                <button id="menuBtn" class="p-2 rounded-full hover:bg-crepe-600 transition">
                    <i class="fas fa-ellipsis-v text-xl"></i>
                </button>
                <div id="menuDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10">
                    <div class="py-1">
                        <button onclick="showLoginModal('owner')" class="block w-full text-left px-4 py-2 text-gray-800 hover:bg-crepe-100">Owner Login</button>
                        <button onclick="showLoginModal('cashier')" class="block w-full text-left px-4 py-2 text-gray-800 hover:bg-crepe-100">Cashier Login</button>
                        <button onclick="showLoginModal('maker')" class="block w-full text-left px-4 py-2 text-gray-800 hover:bg-crepe-100">Maker Login</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Customer View (Default) -->
        <div id="customerView" class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6">
            <h2 class="text-2xl font-bold text-crepe-700 mb-6 text-center">Order Status</h2>
            <div class="mb-6">
                <label for="orderNumber" class="block text-sm font-medium text-gray-700 mb-2">Enter your order number:</label>
                <div class="flex">
                    <input type="text" id="orderNumber" class="flex-1 px-4 py-2 border border-gray-300 rounded-l-md focus:ring-crepe-500 focus:border-crepe-500" placeholder="e.g. CR1234">
                    <button onclick="checkOrderStatus()" class="bg-crepe-500 text-white px-4 py-2 rounded-r-md hover:bg-crepe-600 transition">Check</button>
                </div>
            </div>
            <div id="orderStatus" class="hidden bg-crepe-50 p-4 rounded-lg">
                <div class="flex justify-between mb-2">
                    <span class="font-medium">Your order:</span>
                    <span id="yourOrderNumber" class="font-bold">CR1234</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span class="font-medium">Orders ahead:</span>
                    <span id="ordersAhead" class="font-bold">3</span>
                </div>
                <div class="flex justify-between mb-4">
                    <span class="font-medium">Estimated wait:</span>
                    <span id="estimatedWait" class="font-bold">15 minutes</span>
                </div>
                <div id="readyMessage" class="hidden bg-green-100 text-green-800 p-3 rounded text-center">
                    <i class="fas fa-check-circle mr-2"></i> Your crepe is ready! Please proceed to the stand.
                </div>
            </div>
        </div>

        <!-- Owner Dashboard (Hidden by default) -->
        <div id="ownerView" class="hidden">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl font-bold text-crepe-700">Owner Dashboard</h2>
                <button onclick="showAddUserModal()" class="bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition">
                    <i class="fas fa-user-plus mr-2"></i> Add User
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Today's Orders</h3>
                    <p class="text-3xl font-bold text-crepe-500">24</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Today's Revenue</h3>
                    <p class="text-3xl font-bold text-crepe-500">$186.50</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Active Staff</h3>
                    <p class="text-3xl font-bold text-crepe-500">3</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Sales Overview</h3>
                    <div class="chart-container">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Popular Crepes</h3>
                    <div class="chart-container">
                        <canvas id="popularCrepesChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold text-crepe-700 mb-4">Recent Orders</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order #</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Items</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap">CR1024</td>
                                <td class="px-6 py-4">Nutella Banana, Strawberry Cream</td>
                                <td class="px-6 py-4">$12.50</td>
                                <td class="px-6 py-4"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Completed</span></td>
                                <td class="px-6 py-4">12:34 PM</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap">CR1023</td>
                                <td class="px-6 py-4">Ham & Cheese, Sugar Lemon</td>
                                <td class="px-6 py-4">$10.00</td>
                                <td class="px-6 py-4"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">In Progress</span></td>
                                <td class="px-6 py-4">12:22 PM</td>
                            </tr>
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap">CR1022</td>
                                <td class="px-6 py-4">Custom: Nutella, Strawberry, Whipped Cream</td>
                                <td class="px-6 py-4">$8.50</td>
                                <td class="px-6 py-4"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Queued</span></td>
                                <td class="px-6 py-4">12:15 PM</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Cashier View (Hidden by default) -->
        <div id="cashierView" class="hidden">
            <h2 class="text-2xl font-bold text-crepe-700 mb-6">Cashier Dashboard</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Predefined Crepes -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Predefined Crepes</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="addToOrder('Nutella Banana', 7.5)" class="order-card bg-crepe-50 p-4 rounded-lg hover:bg-crepe-100 border border-crepe-200">
                            <h4 class="font-medium text-crepe-700">Nutella Banana</h4>
                            <p class="text-sm text-gray-600">Nutella, banana slices</p>
                            <p class="mt-2 font-bold text-crepe-600">$7.50</p>
                        </button>
                        <button onclick="addToOrder('Strawberry Cream', 8)" class="order-card bg-crepe-50 p-4 rounded-lg hover:bg-crepe-100 border border-crepe-200">
                            <h4 class="font-medium text-crepe-700">Strawberry Cream</h4>
                            <p class="text-sm text-gray-600">Fresh strawberries, whipped cream</p>
                            <p class="mt-2 font-bold text-crepe-600">$8.00</p>
                        </button>
                        <button onclick="addToOrder('Sugar Lemon', 5)" class="order-card bg-crepe-50 p-4 rounded-lg hover:bg-crepe-100 border border-crepe-200">
                            <h4 class="font-medium text-crepe-700">Sugar Lemon</h4>
                            <p class="text-sm text-gray-600">Sugar, lemon juice</p>
                            <p class="mt-2 font-bold text-crepe-600">$5.00</p>
                        </button>
                        <button onclick="addToOrder('Ham & Cheese', 6.5)" class="order-card bg-crepe-50 p-4 rounded-lg hover:bg-crepe-100 border border-crepe-200">
                            <h4 class="font-medium text-crepe-700">Ham & Cheese</h4>
                            <p class="text-sm text-gray-600">Ham, Swiss cheese</p>
                            <p class="mt-2 font-bold text-crepe-600">$6.50</p>
                        </button>
                    </div>
                </div>

                <!-- Custom Crepe Builder -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-lg font-semibold text-crepe-700 mb-4">Custom Crepe</h3>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Base</label>
                        <select id="baseSelect" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-crepe-500 focus:border-crepe-500">
                            <option value="classic">Classic ($5.00)</option>
                            <option value="wholewheat">Whole Wheat (+$0.50)</option>
                            <option value="glutenfree">Gluten Free (+$1.00)</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fillings</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="nutella" data-price="2">
                                <span class="ml-2">Nutella (+$2.00)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="strawberry" data-price="1.5">
                                <span class="ml-2">Strawberry (+$1.50)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="banana" data-price="1">
                                <span class="ml-2">Banana (+$1.00)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="whippedcream" data-price="1">
                                <span class="ml-2">Whipped Cream (+$1.00)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="ham" data-price="2">
                                <span class="ml-2">Ham (+$2.00)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="cheese" data-price="1.5">
                                <span class="ml-2">Cheese (+$1.50)</span>
                            </label>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Extras</label>
                        <div class="grid grid-cols-2 gap-2">
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="icecream" data-price="2.5">
                                <span class="ml-2">Ice Cream (+$2.50)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="checkbox" class="form-checkbox text-crepe-600" value="nuts" data-price="1">
                                <span class="ml-2">Nuts (+$1.00)</span>
                            </label>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mt-6">
                        <div>
                            <p class="text-sm text-gray-600">Total:</p>
                            <p id="customCrepeTotal" class="text-xl font-bold text-crepe-600">$5.00</p>
                        </div>
                        <button onclick="addCustomToOrder()" class="bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition">
                            Add to Order
                        </button>
                    </div>
                </div>
            </div>

            <!-- Current Order -->
            <div class="mt-8 bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold text-crepe-700 mb-4">Current Order</h3>
                <div id="currentOrderItems" class="mb-4">
                    <!-- Items will be added here dynamically -->
                    <p class="text-gray-500 italic">No items added yet</p>
                </div>
                <div class="flex justify-between items-center border-t border-gray-200 pt-4">
                    <div>
                        <p class="text-sm text-gray-600">Order Total:</p>
                        <p id="orderTotal" class="text-xl font-bold text-crepe-600">$0.00</p>
                    </div>
                    <div class="space-x-2">
                        <button onclick="clearOrder()" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition">
                            Clear
                        </button>
                        <button onclick="submitOrder()" class="bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition">
                            Submit Order
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Maker View (Hidden by default) -->
        <div id="makerView" class="hidden">
            <h2 class="text-2xl font-bold text-crepe-700 mb-6">Maker Dashboard</h2>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Select your station:</label>
                <div class="flex space-x-4">
                    <button onclick="selectStation(1)" id="station1Btn" class="bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition">Station 1</button>
                    <button onclick="selectStation(2)" id="station2Btn" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition">Station 2</button>
                    <button onclick="selectStation(3)" id="station3Btn" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition">Station 3</button>
                </div>
            </div>

            <div id="stationOrders" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Orders will be displayed here -->
                <div class="bg-white p-6 rounded-lg shadow">
                    <p class="text-gray-500 italic">Select a station to view orders</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Login Modal -->
    <div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 id="loginTitle" class="text-xl font-bold text-crepe-700">Login</h3>
                <button onclick="hideLoginModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mb-4">
                <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                <input type="text" id="username" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-crepe-500 focus:border-crepe-500">
            </div>
            <div class="mb-6">
                <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-crepe-500 focus:border-crepe-500">
            </div>
            <button id="loginButton" onclick="login()" class="w-full bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition">Login</button>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md slide-in">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-crepe-700">Add New User</h3>
                <button onclick="hideAddUserModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Role</label>
                <select id="userRole" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-crepe-500 focus:border-crepe-500">
                    <option value="cashier">Cashier</option>
                    <option value="maker">Maker</option>
                </select>
            </div>
            <div class="mb-4">
                <label for="newUsername" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                <input type="text" id="newUsername" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-crepe-500 focus:border-crepe-500">
            </div>
            <div class="mb-6">
                <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <input type="password" id="newPassword" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-crepe-500 focus:border-crepe-500">
            </div>
            <button onclick="addUser()" class="w-full bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition">Add User</button>
        </div>
    </div>

    <!-- Order Submitted Modal -->
    <div id="orderSubmittedModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-full max-w-md slide-in">
            <div class="text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
                    <i class="fas fa-check text-green-600"></i>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mt-3">Order Submitted!</h3>
                <div class="mt-2">
                    <p class="text-sm text-gray-500">Order Number: <span id="submittedOrderNumber" class="font-bold">CR1025</span></p>
                    <p class="text-sm text-gray-500 mt-2">Please give this number to the customer.</p>
                </div>
                <div class="mt-4">
                    <button onclick="hideOrderSubmittedModal()" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-crepe-500 border border-transparent rounded-md hover:bg-crepe-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-crepe-500">
                        Done
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating action button for owner to switch to customer view -->
    <button id="customerViewBtn" class="hidden fixed bottom-6 right-6 bg-crepe-500 text-white p-4 rounded-full shadow-lg floating-btn hover:bg-crepe-600 transition">
        <i class="fas fa-user"></i>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Global variables
        let currentUser = null;
        let currentStation = null;
        let currentOrder = [];
        let orderCounter = 1025; // Starting order number
        let loginType = ''; // owner, cashier, or maker

        // Toggle menu dropdown
        document.getElementById('menuBtn').addEventListener('click', function() {
            document.getElementById('menuDropdown').classList.toggle('hidden');
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('#menuBtn') && !event.target.closest('#menuDropdown')) {
                document.getElementById('menuDropdown').classList.add('hidden');
            }
        });

        // Show login modal
        function showLoginModal(type) {
            loginType = type;
            document.getElementById('loginModal').classList.remove('hidden');
            document.getElementById('loginTitle').textContent = `${type.charAt(0).toUpperCase() + type.slice(1)} Login`;
        }

        // Hide login modal
        function hideLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }

        // Login function
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simple validation (in a real app, this would be a server-side check)
            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }

            // Hardcoded credentials for demo purposes
            const validCredentials = {
                owner: { username: 'admin', password: 'admin123' },
                cashier: { username: 'cashier1', password: 'cashier123' },
                maker: { username: 'maker1', password: 'maker123' }
            };

            if (username === validCredentials[loginType].username && password === validCredentials[loginType].password) {
                currentUser = { type: loginType, username: username };
                hideLoginModal();
                showDashboard();
            } else {
                alert('Invalid credentials');
            }
        }

        // Show the appropriate dashboard based on user type
        function showDashboard() {
            // Hide all views first
            document.getElementById('customerView').classList.add('hidden');
            document.getElementById('ownerView').classList.add('hidden');
            document.getElementById('cashierView').classList.add('hidden');
            document.getElementById('makerView').classList.add('hidden');
            document.getElementById('customerViewBtn').classList.add('hidden');

            // Show the appropriate view
            if (currentUser.type === 'owner') {
                document.getElementById('ownerView').classList.remove('hidden');
                document.getElementById('customerViewBtn').classList.remove('hidden');
                initializeCharts();
            } else if (currentUser.type === 'cashier') {
                document.getElementById('cashierView').classList.remove('hidden');
            } else if (currentUser.type === 'maker') {
                document.getElementById('makerView').classList.remove('hidden');
            }
        }

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('customerView').classList.remove('hidden');
            document.getElementById('ownerView').classList.add('hidden');
            document.getElementById('cashierView').classList.add('hidden');
            document.getElementById('makerView').classList.add('hidden');
            document.getElementById('customerViewBtn').classList.add('hidden');
        }

        // Show customer view from owner dashboard
        document.getElementById('customerViewBtn').addEventListener('click', function() {
            document.getElementById('customerView').classList.remove('hidden');
            document.getElementById('ownerView').classList.add('hidden');
            document.getElementById('customerViewBtn').classList.add('hidden');
        });

        // Check order status for customer
        function checkOrderStatus() {
            const orderNumber = document.getElementById('orderNumber').value;
            
            if (!orderNumber) {
                alert('Please enter an order number');
                return;
            }

            // In a real app, this would check against actual orders
            document.getElementById('orderStatus').classList.remove('hidden');
            document.getElementById('yourOrderNumber').textContent = orderNumber;
            
            // Random number of orders ahead (1-5)
            const ordersAhead = Math.floor(Math.random() * 5) + 1;
            document.getElementById('ordersAhead').textContent = ordersAhead;
            
            // Estimated wait time (5 minutes per order)
            const waitTime = ordersAhead * 5;
            document.getElementById('estimatedWait').textContent = `${waitTime} minutes`;
            
            // If no orders ahead, show ready message
            if (ordersAhead === 0) {
                document.getElementById('readyMessage').classList.remove('hidden');
            } else {
                document.getElementById('readyMessage').classList.add('hidden');
            }
        }

        // Add predefined crepe to order
        function addToOrder(name, price) {
            currentOrder.push({ name, price });
            updateOrderDisplay();
        }

        // Calculate custom crepe total
        function calculateCustomCrepeTotal() {
            let total = 5.00; // Base price
            
            // Get base price
            const baseSelect = document.getElementById('baseSelect');
            if (baseSelect.value === 'wholewheat') total += 0.5;
            if (baseSelect.value === 'glutenfree') total += 1.0;
            
            // Add fillings
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                total += parseFloat(checkbox.dataset.price);
            });
            
            document.getElementById('customCrepeTotal').textContent = `$${total.toFixed(2)}`;
            return total;
        }

        // Add custom crepe to order
        function addCustomToOrder() {
            let name = 'Custom: ';
            const baseSelect = document.getElementById('baseSelect');
            name += baseSelect.options[baseSelect.selectedIndex].text.split(' (')[0];
            
            const ingredients = [];
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                ingredients.push(checkbox.nextElementSibling.textContent.split(' (+')[0]);
            });
            
            if (ingredients.length > 0) {
                name += ' with ' + ingredients.join(', ');
            }
            
            const price = calculateCustomCrepeTotal();
            currentOrder.push({ name, price });
            updateOrderDisplay();
            
            // Reset custom crepe builder
            document.getElementById('baseSelect').value = 'classic';
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            calculateCustomCrepeTotal();
        }

        // Update order display
        function updateOrderDisplay() {
            const orderItemsContainer = document.getElementById('currentOrderItems');
            
            if (currentOrder.length === 0) {
                orderItemsContainer.innerHTML = '<p class="text-gray-500 italic">No items added yet</p>';
                document.getElementById('orderTotal').textContent = '$0.00';
                return;
            }
            
            let html = '';
            let total = 0;
            
            currentOrder.forEach((item, index) => {
                total += item.price;
                html += `
                    <div class="flex justify-between items-center py-2 ${index !== 0 ? 'border-t border-gray-200' : ''}">
                        <div>
                            <p class="font-medium">${item.name}</p>
                        </div>
                        <div class="flex items-center">
                            <p class="font-medium mr-4">$${item.price.toFixed(2)}</p>
                            <button onclick="removeOrderItem(${index})" class="text-red-500 hover:text-red-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            orderItemsContainer.innerHTML = html;
            document.getElementById('orderTotal').textContent = `$${total.toFixed(2)}`;
        }

        // Remove item from order
        function removeOrderItem(index) {
            currentOrder.splice(index, 1);
            updateOrderDisplay();
        }

        // Clear current order
        function clearOrder() {
            currentOrder = [];
            updateOrderDisplay();
        }

        // Submit order
        function submitOrder() {
            if (currentOrder.length === 0) {
                alert('Please add items to the order before submitting');
                return;
            }
            
            // In a real app, this would send to the server
            const orderNumber = 'CR' + orderCounter++;
            document.getElementById('submittedOrderNumber').textContent = orderNumber;
            
            // Show confirmation modal
            document.getElementById('orderSubmittedModal').classList.remove('hidden');
            
            // Clear current order
            clearOrder();
        }

        // Hide order submitted modal
        function hideOrderSubmittedModal() {
            document.getElementById('orderSubmittedModal').classList.add('hidden');
        }

        // Select maker station
        function selectStation(stationNumber) {
            currentStation = stationNumber;
            
            // Update button styles
            document.getElementById('station1Btn').classList.remove('bg-crepe-500', 'text-white');
            document.getElementById('station1Btn').classList.add('bg-gray-200', 'text-gray-800');
            document.getElementById('station2Btn').classList.remove('bg-crepe-500', 'text-white');
            document.getElementById('station2Btn').classList.add('bg-gray-200', 'text-gray-800');
            document.getElementById('station3Btn').classList.remove('bg-crepe-500', 'text-white');
            document.getElementById('station3Btn').classList.add('bg-gray-200', 'text-gray-800');
            
            document.getElementById(`station${stationNumber}Btn`).classList.remove('bg-gray-200', 'text-gray-800');
            document.getElementById(`station${stationNumber}Btn`).classList.add('bg-crepe-500', 'text-white');
            
            // Display orders for the station (mock data)
            const stationOrdersContainer = document.getElementById('stationOrders');
            stationOrdersContainer.innerHTML = '';
            
            // Mock orders
            const orders = [
                { number: 'CR1023', items: 'Ham & Cheese, Sugar Lemon', status: 'preparing', time: '12:22 PM' },
                { number: 'CR1022', items: 'Custom: Nutella, Strawberry, Whipped Cream', status: 'queued', time: '12:15 PM' },
                { number: 'CR1021', items: 'Nutella Banana', status: 'queued', time: '12:05 PM' }
            ];
            
            orders.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'bg-white p-6 rounded-lg shadow order-card';
                orderCard.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-lg text-crepe-700">${order.number}</h4>
                        <span class="px-2 py-1 text-xs rounded-full ${
                            order.status === 'preparing' ? 'bg-yellow-100 text-yellow-800' : 'bg-blue-100 text-blue-800'
                        }">${
                            order.status === 'preparing' ? 'In Progress' : 'Queued'
                        }</span>
                    </div>
                    <p class="text-gray-700 mb-4">${order.items}</p>
                    <p class="text-sm text-gray-500 mb-4">Placed: ${order.time}</p>
                    <div class="flex justify-end">
                        <button onclick="completeOrder('${order.number}')" class="bg-crepe-500 text-white px-4 py-2 rounded-md hover:bg-crepe-600 transition text-sm">
                            Mark Complete
                        </button>
                    </div>
                `;
                stationOrdersContainer.appendChild(orderCard);
            });
        }

        // Complete order (maker)
        function completeOrder(orderNumber) {
            alert(`Order ${orderNumber} marked as complete!`);
            // In a real app, this would update the order status in the database
            selectStation(currentStation); // Refresh orders
        }

        // Show add user modal (owner)
        function showAddUserModal() {
            document.getElementById('addUserModal').classList.remove('hidden');
        }

        // Hide add user modal
        function hideAddUserModal() {
            document.getElementById('addUserModal').classList.add('hidden');
            document.getElementById('newUsername').value = '';
            document.getElementById('newPassword').value = '';
        }

        // Add new user (owner)
        function addUser() {
            const role = document.getElementById('userRole').value;
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newPassword').value;
            
            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }
            
            // In a real app, this would send to the server to create the user
            alert(`New ${role} added: ${username}`);
            hideAddUserModal();
        }

        // Initialize charts for owner dashboard
        function initializeCharts() {
            // Sales chart
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            const salesChart = new Chart(salesCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Daily Revenue',
                        data: [120, 190, 150, 210, 180, 250, 220],
                        backgroundColor: 'rgba(253, 143, 172, 0.2)',
                        borderColor: 'rgba(253, 143, 172, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });

            // Popular crepes chart
            const popularCtx = document.getElementById('popularCrepesChart').getContext('2d');
            const popularChart = new Chart(popularCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Nutella Banana', 'Strawberry Cream', 'Ham & Cheese', 'Sugar Lemon', 'Custom'],
                    datasets: [{
                        data: [35, 25, 20, 15, 5],
                        backgroundColor: [
                            'rgba(253, 143, 172, 0.8)',
                            'rgba(255, 177, 200, 0.8)',
                            'rgba(255, 211, 224, 0.8)',
                            'rgba(255, 229, 236, 0.8)',
                            'rgba(255, 241, 245, 0.8)'
                        ],
                        borderColor: [
                            'rgba(253, 143, 172, 1)',
                            'rgba(255, 177, 200, 1)',
                            'rgba(255, 211, 224, 1)',
                            'rgba(255, 229, 236, 1)',
                            'rgba(255, 241, 245, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
        }

        // Initialize custom crepe total calculation
        document.addEventListener('DOMContentLoaded', function() {
            // Calculate custom crepe total when any input changes
            document.getElementById('baseSelect').addEventListener('change', calculateCustomCrepeTotal);
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', calculateCustomCrepeTotal);
            });
            
            // Initial calculation
            calculateCustomCrepeTotal();
        });
    </script>
</body>
</html>
